<!doctype html>

<html>
<head>
	<script src="https://www.trustedherd.com/platform/workerBadge.js" data-key="6peOGixNeg" async defer>
	</script>
	<script src="https://www.trustedherd.com/platform/reviewWidget.js" async defer></script>
</head>
<body>
	<h1>This is test for worker reputation badge!</h1>

	<div>
		<h2>Reputation Badge</h2>
		1 <br/>
		<div class="th-worker-badge" data-source="dGVzdCt3b3JrZXJAdGFybWFjc2EuY29t"></div>
		2 <br/>
		<div class="th-worker-badge" data-source="aWdvci5pdmFub3Zza2lAdGFybWFjLmlv"></div>
		3 <br/>
		<div class="th-worker-badge" data-source="Y291cnQ2MDQ1QHlhaG9vLmNvbQ=="></div>
		<br/>
		<div class="th-worker-badge" data-source="Y291cnQ2MDQ1QHlhaG9vLmNvbQ="></div>
		<br/>
		<div class="th-worker-badge" data-source="Y291cnQ2MDQ1QHlhaG9vLmNvbQ"></div>

		<div id="custom-render" class="th-worker-badge" data-noload="true" data-source="aWdvci5pdmFub3Zza2lAdGFybWFjLmlv"></div>

		<div>
			<button onclick="loadBadgeDynamically(this)">Load Badge Dynamically</button>
		</div>

		Client example
		<div class="th-worker-badge" data-source="YWxla3NhbmRyLnZudWtvdkBnbWFpbC5jb20="></div>
		<br/>
		Real one
		<div class=th-worker-badge" data-source="YmFmb3gxMUBnbWFpbC5jb20="></div>
	</div>

	<br/> <br/>

	<button onclick="loadLink();">Load Remote</button>
	<input type="text" id="requestId">
	<button onclick="loadRateWidget()">Load Widget</button>

	<div id="reviewWidgetContainer"></div>

	<script type="text/javascript">
		function loadLink(){
			fetch("https://www.trustedherd.com/media/workerReputationBadge");
		}

		function loadRateWidget() {
			var requestId = document.getElementById("requestId");
			console.log(requestId.value);
			 var js = thReviewWidget('reviewWidgetContainer', 'https://www.trustedherd.com', {
                    clientId: '6peOGixNeg',
                    requestId: requestId.value, type: 'workerReview'
                }, function () {
                    // Handle success
                    console.log("Review was submitted successfully");
                }, function (errorObj) {
                    // Handle error
                    console.log("An error occurred");
                    console.log("Error message: " + errorObj.message);
                    location.reload();
                });
			 console.log(js);
			 js.load();
		}

		function loadBadgeDynamically(element) {
			var parent = element.parentElement;
			var holder = document.createElement("div");
			holder.setAttribute("class", "th-worker-badge");
			holder.setAttribute("id", Math.round(1E6 * Math.random()));
			parent.appendChild(holder);
			thReputationWidget.render(holder.getAttribute("id"), "6peOGixNeg", "aWdvci5pdmFub3Zza2lAdGFybWFjLmlv");
		}
	</script>
</body>
</html>
